#   Курсовой проект
_____________
## Веб-сервисы
### Главная
#### В JSON-файл выводятся данные в формате:
Приветствие в формате — «Доброе утро» / «Добрый день» / «Добрый вечер» / «Доброй ночи» в зависимости от текущего времени. 

По каждой карте: 
- последние 4 цифры карты;
- общая сумма расходов;
- кешбэк (1 рубль на каждые 100 рублей).
  
Топ-5 транзакций по сумме платежа.

Курс валют.

Стоимость акций из S&P500.
Вот комментарии к функциям и краткая информация о них:

1. read_file(filename): Эта функция читает данные о транзакциях из файла Excel.
2. get_greeting(datetime): Эта функция принимает строку с датой и временем и возвращает приветствие в зависимости от времени суток.
3. process_transactions(transactions): Функция вычисляет общую сумму расходов по списку транзакций и вычисляет кешбэк.
4. process_card_data(operations_1): Эта функция обрабатывает данные о картах из списка транзакций. Она создает словарь для каждой карты, где хранит последние четыре цифры номера карты, общую сумму потраченных средств и сумму кэшбэка.
5. top_transactions(reader): Функция возвращает список из пяти самых дорогих транзакций.
6. exchange_rates(currency): Эта функция получает курс валюты по отношению к рублю с использованием API.
7. sp500(stock): Функция получает текущую цену акции с помощью Yahoo Finance.

В основной части кода происходит чтение данных о транзакциях, вычисление общей суммы расходов, обработка данных о картах, выборка самых дорогих транзакций, получение курсов валют и цен на акции, а затем сохранение всех данных в формате JSON в файл "operations_data.json".

## Сервисы
### Простой поиск
Пользователь передает строку для поиска, возвращается JSON-ответ со всеми транзакциями, содержащими запрос в описании или категории.
Поиск выполняется через функцию search_regex(data, search) она возвращает JSON-ответ со всеми транзакциями, содержащими запрос в описании или категории

## Отчеты
### Траты по категории
Функция возвращает траты по заданной категории за последние три месяца.
Поиск выполняется через функцию spending_by_category(transactions: pd.DataFrame, category: str, date: Optional[str] = None) и возвращает траты по заданной категории за последние три месяца.
Дополнительно функция обернута в декоратор report_to_file который может принимать или не принимать название файла, по умочанию report.csv. Данный декоратор записывает результат в файл формата csv, xlsx или txt в зависимости от передаваемого наименования файла.
